<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>àª¨à«€àª²àª•àª‚àª  àª«à«àª°à«‚àªŸ àªàª¨à«àª¡ àªµà«‡àªœà«€àªŸà«‡àª¬àª²</title>

<style>
:root{
  --bg:#f4f6f8;
  --card:#ffffff;
  --text:#1f2937;
  --muted:#6b7280;
  --border:#d1d5db;

  --green:#1f7a3f;
  --green-light:#e9f6ef;

  --danger:#c53030;
  --radius:16px;
}


/* ğŸŒ¿ FLOATING EMOJI LAYERS */
.emoji-bg,.emoji-fg{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.emoji-bg{z-index:0}
.emoji-fg{z-index:2}

.emoji{position:absolute;animation:float linear infinite;}
.bg{font-size:34px;opacity:0.60;}
.fg{font-size:50px;opacity:0.15;animation:floatSide linear infinite;}

@keyframes float{
  from{transform:translateY(110vh) rotate(0deg)}
  to{transform:translateY(-20vh) rotate(360deg)}
}
@keyframes floatSide{
  from{transform:translate(-10vw,110vh) rotate(0deg)}
  to{transform:translate(10vw,-20vh) rotate(360deg)}
}

/* -------- UI -------- */
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI",Arial;
  background:var(--bg);
  color:var(--text);
}
.app{
  position:relative;
  z-index:1;
  max-width:560px;
  margin:auto;
  padding:14px;
}
.header{text-align:center;padding:14px 0}
.header h1{margin:0;font-size:22px;font-weight:800}
.header p{margin-top:6px;font-size:13px;color:var(--muted)}

.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  margin-top:14px;
  box-shadow:0 10px 22px rgba(0,0,0,.06);
}
label{font-size:14px;font-weight:700;margin-bottom:6px;display:block}
input,select,textarea,button{
  width:100%;
  padding:10px;
  font-size:14px;
  border-radius:10px;
  border:1px solid #d1d5db;
}
textarea{min-height:240px;resize:none;background:#fafafa}

.mode{display:flex;gap:8px}
.mode button{flex:1;background:#f3f4f6;font-weight:700}
.mode .active{background:var(--green);color:#fff}

.row{display:grid;gap:6px;margin-top:8px}
.row.normal{grid-template-columns:1.4fr 1fr 1fr 1fr}
.row.advanced{grid-template-columns:1.4fr 1fr 1fr}
.row.buyer{grid-template-columns:1.4fr 1fr 1fr 1fr 1fr 1fr}

.header-row{
  display:grid;
  grid-template-columns:1.4fr 1fr 1fr 1fr 1fr 1fr;
  gap:6px;
  font-size:12px;
  font-weight:700;
  color:var(--muted);
  margin-top:10px;
}

.hidden{display:none}
.other{display:none}

.btn{border:none;font-weight:700;margin-top:12px}
.btn-add{background:var(--green-light);color:var(--green)}
.btn-gen{background:var(--green);color:#fff}
.btn-wa{background:#dcfce7;color:#166534}
.btn-copy{background:#eef2ff;color:#1d4ed8}
.btn-clear{background:#fff3f3;color:var(--danger)}

.footer{
  text-align:center;
  font-size:12px;
  color:var(--muted);
  margin:22px 0 8px;
}
/* ğŸ‰ Small festival switch */
.festival-switch{
  margin-top:18px;
  text-align:center;
}
.festival-switch select{
  width:auto;
  font-size:12px;
  padding:6px 10px;
  border-radius:999px;
  color:var(--muted);
}
.festival-switch{
  display: none;
}

.header{
  padding-top: env(safe-area-inset-top);
  padding-top: calc(env(safe-area-inset-top) + 14px);
}

</style>
</head>

<body>
<!-- ğŸŒ± BACKGROUND EMOJIS -->
<div class="emoji-bg">
<span class="emoji bg" style="left:14%;animation-duration:38s">ğŸ</span> <span class="emoji bg" style="left:62%;animation-duration:27s">ğŸ</span> <span class="emoji bg" style="left:88%;animation-duration:41s">ğŸ</span> <span class="emoji bg" style="left:23%;animation-duration:33s">ğŸŠ</span> <span class="emoji bg" style="left:51%;animation-duration:45s">ğŸ‹</span> <span class="emoji bg" style="left:76%;animation-duration:29s">ğŸŒ</span> <span class="emoji bg" style="left:12%;animation-duration:36s">ğŸ‰</span> <span class="emoji bg" style="left:93%;animation-duration:40s">ğŸ‡</span> <span class="emoji bg" style="left:44%;animation-duration:31s">ğŸ“</span> <span class="emoji bg" style="left:67%;animation-duration:43s">ğŸ«</span> <span class="emoji bg" style="left:35%;animation-duration:26s">ğŸˆ</span> <span class="emoji bg" style="left:19%;animation-duration:44s">ğŸ’</span> <span class="emoji bg" style="left:82%;animation-duration:37s">ğŸ‘</span> <span class="emoji bg" style="left:55%;animation-duration:30s">ğŸ¥­</span> <span class="emoji bg" style="left:28%;animation-duration:42s">ğŸ</span> <span class="emoji bg" style="left:71%;animation-duration:28s">ğŸ¥¥</span> <span class="emoji bg" style="left:49%;animation-duration:39s">ğŸ¥</span> <span class="emoji bg" style="left:10%;animation-duration:40s">ğŸ…</span> <span class="emoji bg" style="left:90%;animation-duration:32s">ğŸ†</span> <span class="emoji bg" style="left:33%;animation-duration:46s">ğŸ¥‘</span> <span class="emoji bg" style="left:60%;animation-duration:25s">ğŸ¥¦</span> <span class="emoji bg" style="left:15%;animation-duration:34s">ğŸ¥¬</span> <span class="emoji bg" style="left:85%;animation-duration:41s">ğŸ¥’</span> <span class="emoji bg" style="left:41%;animation-duration:35s">ğŸŒ¶ï¸</span> <span class="emoji bg" style="left:77%;animation-duration:27s">ğŸ«‘</span> <span class="emoji bg" style="left:22%;animation-duration:43s">ğŸŒ½</span> <span class="emoji bg" style="left:58%;animation-duration:38s">ğŸ¥•</span> <span class="emoji bg" style="left:94%;animation-duration:26s">ğŸ«’</span> 
<span class="emoji bg" style="left:47%;animation-duration:45s">ğŸ§„</span> 
<span class="emoji bg" style="left:69%;animation-duration:31s">ğŸ§…</span> 
<span class="emoji bg" style="left:18%;animation-duration:29s">ğŸ¥”</span> 
<span class="emoji bg" style="left:81%;animation-duration:37s">ğŸ </span>


<span class="emoji bg permanent" style="left:31%;animation-duration:35s;font-size:1.6rem">
  Developed by Pritesh Hirani | Hirani Tech Â© 2026
</span>
</div>

<!-- ğŸŒ¿ FOREGROUND FLOATING EMOJIS -->
<div class="emoji-fg">
<span class="emoji fg" style="left:72%;animation-duration:34s;font-size:2.4rem">ğŸ«</span> <span class="emoji fg" style="left:15%;animation-duration:42s;font-size:1.8rem">ğŸŒ½</span> <span class="emoji fg" style="left:88%;animation-duration:27s;font-size:2.9rem">ğŸ</span> <span class="emoji fg" style="left:33%;animation-duration:39s;font-size:1.2rem">ğŸ“</span> <span class="emoji fg" style="left:54%;animation-duration:45s;font-size:2.1rem">ğŸ§…</span> <span class="emoji fg" style="left:11%;animation-duration:31s;font-size:1.5rem">ğŸ¥‘</span> <span class="emoji fg" style="left:92%;animation-duration:26s;font-size:2.7rem">ğŸ¥¦</span> <span class="emoji fg" style="left:41%;animation-duration:40s;font-size:1.9rem">ğŸ‘</span> <span class="emoji fg" style="left:67%;animation-duration:33s;font-size:2.3rem">ğŸ¥•</span> <span class="emoji fg" style="left:25%;animation-duration:38s;font-size:1.4rem">ğŸ‡</span> <span class="emoji fg" style="left:80%;animation-duration:44s;font-size:2.8rem">ğŸ…</span> <span class="emoji fg" style="left:49%;animation-duration:29s;font-size:1.1rem">ğŸŒ</span> <span class="emoji fg" style="left:18%;animation-duration:35s;font-size:2.0rem">ğŸ«’</span> <span class="emoji fg" style="left:61%;animation-duration:41s;font-size:2.5rem">ğŸ</span> <span class="emoji fg" style="left:36%;animation-duration:28s;font-size:1.7rem">ğŸŒ¶ï¸</span> <span class="emoji fg" style="left:95%;animation-duration:46s;font-size:3.0rem">ğŸ¥¬</span> <span class="emoji fg" style="left:14%;animation-duration:30s;font-size:1.3rem">ğŸ’</span> <span class="emoji fg" style="left:52%;animation-duration:37s;font-size:2.2rem">ğŸ¥”</span> <span class="emoji fg" style="left:76%;animation-duration:25s;font-size:1.6rem">ğŸ</span> <span class="emoji fg" style="left:29%;animation-duration:43s;font-size:2.6rem">ğŸ¥¥</span> <span class="emoji fg" style="left:83%;animation-duration:32s;font-size:1.2rem">ğŸ†</span> <span class="emoji fg" style="left:44%;animation-duration:36s;font-size:2.9rem">ğŸ‹</span> <span class="emoji fg" style="left:70%;animation-duration:45s;font-size:1.8rem">ğŸ</span> <span class="emoji fg" style="left:12%;animation-duration:27s;font-size:2.1rem">ğŸ‰</span> <span class="emoji fg" style="left:58%;animation-duration:31s;font-size:1.5rem">ğŸ§„</span> <span class="emoji fg" style="left:39%;animation-duration:42s;font-size:2.4rem">ğŸ¥­</span> <span class="emoji fg" style="left:85%;animation-duration:34s;font-size:1.9rem">ğŸ¥’</span> <span class="emoji fg" style="left:22%;animation-duration:39s;font-size:2.7rem">ğŸŠ</span> <span class="emoji fg" style="left:64%;animation-duration:40s;font-size:1.3rem">ğŸ«‘</span> <span class="emoji fg" style="left:47%;animation-duration:28s;font-size:2.0rem">ğŸ¥</span> <span class="emoji fg" style="left:90%;animation-duration:44s;font-size:2.2rem">ğŸ </span> <span class="emoji fg" style="left:31%;animation-duration:35s;font-size:1.6rem">ğŸˆ</span>

<span class="emoji fg permanent" style="left:31%;animation-duration:35s;font-size:1.6rem">
  Developed by Pritesh Hirani | Hirani Tech Â© 2026
</span>

</div>


<div class="app">

<div class="header">
  <h1>ğŸ¥¦ àª¨à«€àª²àª•àª‚àª  àª«à«àª°à«‚àªŸ àªàª¨à«àª¡ àªµà«‡àªœà«€àªŸà«‡àª¬àª²</h1>
  <p>àª­àª¾àªµ â€¢ àª¬àª¿àª² â€¢ àª–àª°à«€àª¦àª¦àª¾àª° â€¢ WhatsApp</p>
</div>
<div id="festivalMessage" style="
  text-align:center;
  font-weight:700;
  font-size:14px;
  margin-top:6px;
  color:var(--green);
  display:none;
">
</div>


<!-- MODE -->
<div class="card">
<label>àª®à«‹àª¡ àªªàª¸àª‚àª¦ àª•àª°à«‹</label>
<div class="mode">
  <button id="mNormal" class="active" onclick="setMode('normal')">ğŸŸ¢ Normal</button>
  <button id="mAdv" onclick="setMode('advanced')">ğŸ”µ Advanced</button>
  <button id="mBuyer" onclick="setMode('buyer')">ğŸ”´ Buyer</button>
</div>
</div>

<!-- FARMER -->
<div id="farmerSection" class="card">
<label>àª–à«‡àª¡à«‚àª¤</label>
<select id="farmerSelect" onchange="toggleFarmerOther();fillFarmerMobile()">
  <option value="">àª–à«‡àª¡à«‚àª¤ àªªàª¸àª‚àª¦ àª•àª°à«‹</option>
  <option>JK Hirani</option>
  <option>Bhumi</option>
  <option>Kumud</option>
  <option>Dharmin</option>
  <option>Shreeji Farm</option>
  <option>HMV</option>
  <option value="OTHER">àª…àª¨à«àª¯</option>
</select>
<input id="farmerOther" class="other" placeholder="àª–à«‡àª¡à«‚àª¤àª¨à«àª‚ àª¨àª¾àª® àª²àª–à«‹">
<input id="farmerMobile" placeholder="àª®à«‹àª¬àª¾àª‡àª² àª¨àª‚àª¬àª° (91XXXXXXXXXX)">
</div>

<!-- SELLER -->
<div id="sellerSection" class="card">
<label>àª¶àª¾àª• / àª­àª¾àªµ</label>
<div id="sellerItems"></div>
<button class="btn btn-add" onclick="addSellerItem()">â• àªµàª§à« àª‰àª®à«‡àª°à«‹</button>
</div>

<!-- BUYER -->
<div id="buyerSection" class="card hidden">
<label>àª–àª°à«€àª¦àª¦àª¾àª°</label>
<select id="buyerSelect" onchange="toggleBuyerOther();fillBuyerMobile()">
  <option value="">àª–àª°à«€àª¦àª¦àª¾àª° àªªàª¸àª‚àª¦ àª•àª°à«‹</option>
  <option>Mohan</option>
  <option>Mansoor</option>
  <option>Ramesh</option>
  <option value="OTHER">àª…àª¨à«àª¯</option>
</select>
<input id="buyerOther" class="other" placeholder="àª–àª°à«€àª¦àª¦àª¾àª°àª¨à«àª‚ àª¨àª¾àª® àª²àª–à«‹">
<input id="buyerMobile" placeholder="àª®à«‹àª¬àª¾àª‡àª² àª¨àª‚àª¬àª° (91XXXXXXXXXX)">
<button
  type="button"
  id="pickContactBtn"
  onclick="pickContact()"
  style="font-size:12px;padding:6px 10px;margin-top:6px">
  ğŸ“‡ Pick from Contacts
</button>

<div class="header-row">
  <div>àª¶àª¾àª•</div><div>àª¬à«‹àª•à«àª¸</div><div>àªµàªœàª¨</div>
  <div>àª­àª¾àªµ</div><div>àª•àª®àª¿àª¶àª¨ %</div><div>àª®àªœà«‚àª°à«€ â‚¹</div>
</div>

<div id="buyerItems"></div>
<button class="btn btn-add" onclick="addBuyerItem()">â• àª†àª‡àªŸàª® àª‰àª®à«‡àª°à«‹</button>

<label style="margin-top:12px">àª…àª¨à«àª¯ àª–àª°à«àªš (â‚¹)</label>
<input id="otherExpense" value="0">
</div>

<!-- MESSAGE -->
<div class="card">
<button class="btn btn-gen" onclick="generate()">ğŸ“„ àª¸àª‚àª¦à«‡àª¶ àª¬àª¨àª¾àªµà«‹</button>
<button class="btn btn-wa" onclick="sendWhatsApp()">ğŸ“² WhatsApp àª®à«‹àª•àª²à«‹</button>
<textarea id="message" readonly></textarea>
<button class="btn btn-copy" onclick="copyText()">ğŸ“‹ àª•à«‰àªªà«€</button>
<button class="btn btn-clear" onclick="clearAll()">ğŸ§¹ àª•à«àª²àª¿àª¯àª°</button>
</div>

<div class="festival-switch">
  <select onchange="manualFestival(this.value)">
    <option value="">Auto festival theme</option>

    <!-- ğŸ‡®ğŸ‡³ National Days -->
    <option value="RepublicDay">Republic Day ğŸ‡®ğŸ‡³</option>
    <option value="IndependenceDay">Independence Day ğŸ‡®ğŸ‡³</option>
    <option value="GandhiJayanti">Gandhi Jayanti ğŸ•Šï¸</option>

    <!-- ğŸª January -->
    <option value="Makar">Makar Sankranti ğŸª</option>
    <option value="Lohri">Lohri ğŸ”¥</option>
    <option value="Pongal">Pongal ğŸŒ¾</option>

    <!-- ğŸŒ¼ February -->
    <option value="VasantPanchami">Vasant Panchami ğŸŒ¼</option>
    <option value="Shivratri">Maha Shivratri ğŸ”±</option>

    <!-- ğŸ¨ March -->
    <option value="Holi">Holi ğŸ¨</option>

    <!-- ğŸŒ¸ April -->
    <option value="RamNavami">Ram Navami ğŸ¹</option>
    <option value="HanumanJayanti">Hanuman Jayanti ğŸš©</option>
    <option value="Ugadi">Ugadi ğŸŒ¿</option>

    <!-- ğŸŒ• May -->
    <option value="AkshayaTritiya">Akshaya Tritiya ğŸ’°</option>
    <option value="BuddhaPurnima">Buddha Purnima â˜¸ï¸</option>

    <!-- ğŸŒ§ï¸ July -->
    <option value="RathYatra">Rath Yatra ğŸ›•</option>
    <option value="GuruPurnima">Guru Purnima ğŸ“¿</option>

    <!-- ğŸ„ August -->
    <option value="RakshaBandhan">Raksha Bandhan ğŸ§µ</option>
    <option value="Janmashtami">Janmashtami ğŸ¦š</option>

    <!-- ğŸ˜ September -->
    <option value="GaneshChaturthi">Ganesh Chaturthi ğŸ˜</option>

    <!-- ğŸŒº October -->
    <option value="Navratri">Navratri ğŸ’ƒ</option>
    <option value="Dussehra">Dussehra ğŸ¹</option>

    <!-- ğŸª” November -->
    <option value="Diwali">Diwali ğŸª”</option>
    <option value="Govardhan">Govardhan Puja ğŸŒ¿</option>
    <option value="BhaiDooj">Bhai Dooj ğŸ‘«</option>

    <!-- ğŸ“– December -->
    <option value="GitaJayanti">Gita Jayanti ğŸ“–</option>
    <option value="Christmas">Christmas ğŸ„</option>

    <option value="Default">Default theme</option>
  </select>
</div>


<div class="footer">
Developed by <strong>Pritesh Hirani</strong> | Hirani Tech Â© <span id="year"></span>
</div>

</div>

<script>


document.getElementById("year").innerText=new Date().getFullYear();

let MODE="normal";
let MANUAL_THEME = false;

/* ğŸ‰ FESTIVAL THEMES */
const THEMES={
 
Default:{
  green:"#1f7a3f",
  bg:"#f4f6f8",
  emoji:["ğŸ¥¦","ğŸ¥•","ğŸ¥”","ğŸ§…","ğŸ§„","ğŸ¥’","ğŸ†","ğŸŒ¶ï¸","ğŸ«‘","ğŸŒ½","ğŸ¥¬","ğŸ¥—","ğŸ ","ğŸ«›","ğŸ«˜", "ğŸ","ğŸ","ğŸ","ğŸŠ","ğŸ‹","ğŸŒ","ğŸ‰","ğŸ‡","ğŸ“","ğŸ«","ğŸ’","ğŸ‘","ğŸ¥­","ğŸ","ğŸ¥","ğŸ…","ğŸˆ","ğŸ‹â€ğŸŸ©","ğŸ¥¥","ğŸ«’","ğŸ¥‘","ğŸ„"],
  message:"ğŸ™ Welcome â€¢ Wishing you a prosperous day ğŸ™ "
},


RepublicDay:{
  green:"#0f172a",
  bg:"#eff6ff",
  emoji:["ğŸ‡®ğŸ‡³","ğŸª·","ğŸ•Šï¸"],
  message:"ğŸ‡®ğŸ‡³ Happy Republic Day ğŸ‡®ğŸ‡³"
},

IndependenceDay:{
  green:"#15803d",
  bg:"#ecfdf5",
  emoji:["ğŸ‡®ğŸ‡³","ğŸª·","ğŸ•Šï¸"],
  message:"ğŸ‡®ğŸ‡³ Happy Independence Day ğŸ‡®ğŸ‡³"
},

GandhiJayanti:{
  green:"#334155",
  bg:"#f8fafc",
  emoji:["ğŸ•Šï¸","ğŸ™","ğŸ§˜"],
  message:"ğŸ•Šï¸ Gandhi Jayanti â€¢ Truth & Non-Violence ğŸ•Šï¸"
},

Makar:{
  green:"#d97706",
  bg:"#fffbeb",
  emoji:["ğŸª","â˜€ï¸","ğŸŒ¾"],
  message:"ğŸª Happy Makar Sankranti ğŸª"
},

Lohri:{
  green:"#b91c1c",
  bg:"#fff1f2",
  emoji:["ğŸ”¥","ğŸŒ¾","ğŸªµ"],
  message:"ğŸ”¥ Happy Lohri ğŸ”¥"
},

Pongal:{
  green:"#15803d",
  bg:"#f0fdf4",
  emoji:["ğŸŒ¾","ğŸ¥¥","â˜€ï¸"],
  message:"ğŸŒ¾ Happy Pongal ğŸŒ¾"
},

VasantPanchami:{
  green:"#ca8a04",
  bg:"#fefce8",
  emoji:["ğŸŒ¼","ğŸ“š","ğŸª”"],
  message:"ğŸŒ¼ Happy Vasant Panchami ğŸŒ¼"
},

Shivratri:{
  green:"#0f172a",
  bg:"#f1f5f9",
  emoji:["ğŸ”±","ğŸ•‰ï¸","ğŸŒ™"],
  message:"ğŸ”± Happy Maha Shivratri ğŸ”±"
},

Holi:{
  green:"#db2777",
  bg:"#fff1f2",
  emoji:["ğŸ¨","ğŸŒˆ","ğŸ’¥"],
  message:"ğŸ¨ Happy Holi ğŸ¨"
},

RamNavami:{
  green:"#ea580c",
  bg:"#fff7ed",
  emoji:["ğŸ¹","ğŸ•‰ï¸","ğŸŒ¸"],
  message:"ğŸ¹ Happy Ram Navami ğŸ¹"
},

HanumanJayanti:{
  green:"#b91c1c",
  bg:"#fff7ed",
  emoji:["ğŸš©","ğŸ’ª","ğŸ•‰ï¸"],
  message:"ğŸš© Happy Hanuman Jayanti ğŸš©"
},

Ugadi:{
  green:"#166534",
  bg:"#f0fdf4",
  emoji:["ğŸŒ¿","ğŸ¥­","ğŸª”"],
  message:"ğŸŒ¿ Happy Ugadi ğŸŒ¿"
},

AkshayaTritiya:{
  green:"#ca8a04",
  bg:"#fffbeb",
  emoji:["ğŸ’°","ğŸª”","ğŸŒ¸"],
  message:"ğŸ’° Happy Akshaya Tritiya ğŸ’°"
},

BuddhaPurnima:{
  green:"#0f766e",
  bg:"#f0fdfa",
  emoji:["â˜¸ï¸","ğŸ•Šï¸","ğŸŒ•"],
  message:"â˜¸ï¸ Happy Buddha Purnima â˜¸ï¸"
},

RathYatra:{
  green:"#7c2d12",
  bg:"#fff7ed",
  emoji:["ğŸ›•","ğŸš©","ğŸ™"],
  message:"ğŸ›• Happy Rath Yatra ğŸ›•"
},

GuruPurnima:{
  green:"#334155",
  bg:"#f8fafc",
  emoji:["ğŸ“¿","ğŸ™","ğŸŒ•"],
  message:"ğŸ“¿ Happy Guru Purnima ğŸ“¿"
},

RakshaBandhan:{
  green:"#be185d",
  bg:"#fdf2f8",
  emoji:["ğŸ§µ","ğŸ’–","ğŸ"],
  message:"ğŸ§µ Happy Raksha Bandhan ğŸ§µ"
},

Janmashtami:{
  green:"#1e40af",
  bg:"#eff6ff",
  emoji:["ğŸ¦š","ğŸªˆ","ğŸ‘¶"],
  message:"ğŸ¦š Happy Janmashtami ğŸ¦š"
},

GaneshChaturthi:{
  green:"#c2410c",
  bg:"#fff7ed",
  emoji:["ğŸ˜","ğŸŒº","ğŸª”"],
  message:"ğŸ˜ Happy Ganesh Chaturthi ğŸ˜"
},

Navratri:{
  green:"#7c3aed",
  bg:"#faf5ff",
  emoji:["ğŸª”","ğŸ’ƒ","ğŸ™"],
  message:"ğŸª” Happy Navratri ğŸª”"
},

Dussehra:{
  green:"#dc2626",
  bg:"#fff1f2",
  emoji:["ğŸ¹","ğŸ”¥","ğŸš©"],
  message:"ğŸ¹ Happy Dussehra ğŸ¹"
},

Diwali:{
  green:"#b45309",
  bg:"#fff7ed",
  emoji:["ğŸª”","âœ¨","ğŸ†"],
  message:"ğŸª” Happy Diwali ğŸª”"
},

Govardhan:{
  green:"#166534",
  bg:"#f0fdf4",
  emoji:["ğŸŒ¿","ğŸ„","ğŸ™"],
  message:"ğŸŒ¿ Happy Govardhan Puja ğŸŒ¿"
},

BhaiDooj:{
  green:"#be185d",
  bg:"#fdf2f8",
  emoji:["ğŸ‘«","ğŸ’–","ğŸª”"],
  message:"ğŸ‘« Happy Bhai Dooj ğŸ‘«"
},

GitaJayanti:{
  green:"#1e293b",
  bg:"#f8fafc",
  emoji:["ğŸ“–","ğŸ•‰ï¸","ğŸ™"],
  message:"ğŸ“– Happy Gita Jayanti ğŸ“–"
},

Christmas:{
  green:"#166534",
  bg:"#f0fdf4",
  emoji:["ğŸ„","â­","ğŸ"],
  message:"ğŸ„ Merry Christmas ğŸ„"
}

};

function applyTheme(t){
  const th = THEMES[t] || THEMES.Default;

  document.documentElement.style.setProperty("--green", th.green);
  document.documentElement.style.setProperty("--bg", th.bg);

  document.querySelectorAll(".emoji-bg .emoji:not(.permanent)").forEach((e,i)=>{
    e.textContent = th.emoji[i % th.emoji.length];
  });

  document.querySelectorAll(".emoji-fg .emoji:not(.permanent)").forEach((e,i)=>{
    e.textContent = th.emoji[i % th.emoji.length];
  });

  // ğŸ‰ Festival message
  const msgBox = document.getElementById("festivalMessage");
  if (th.message) {
    msgBox.textContent = th.message;
    msgBox.style.display = "block";
  } else {
    msgBox.style.display = "none";
  }
}



function autoFestival(){
  if (MANUAL_THEME) return;

  const d = new Date();
  const m = d.getMonth() + 1;   // 1â€“12
  const day = d.getDate();

  /* ğŸ‡®ğŸ‡³ NATIONAL DAYS (TOP PRIORITY) */
  if (m === 1 && day >= 20 && day <= 30) applyTheme("RepublicDay");
  else if (m === 8 && day >= 1 && day <=15 ) applyTheme("IndependenceDay");
  else if (m === 10 && day === 2) applyTheme("GandhiJayanti");

  /* ğŸª JANUARY */
  else if (m === 1 && day >= 10 && day <= 14) applyTheme("Makar");
  else if (m === 1 && day >= 15 && day <= 16) applyTheme("Lohri");
  else if (m === 1 && day >= 16 && day <= 17) applyTheme("Pongal");

  /* ğŸŒ¼ FEBRUARY */
  else if (m === 2 && day >= 1 && day <= 5) applyTheme("VasantPanchami");
  else if (m === 2 && day >= 18 && day <= 20) applyTheme("Shivratri");

  /* ğŸ¨ MARCH */
  else if (m === 3 && day >= 24 && day <= 25) applyTheme("Holi");

  /* ğŸŒ¸ APRIL */
  else if (m === 4 && day >= 1 && day <= 10) applyTheme("RamNavami");
  else if (m === 4 && day >= 14 && day <= 16) applyTheme("HanumanJayanti");
  else if (m === 4 && day >= 1 && day <= 5) applyTheme("Ugadi");

  /* ğŸŒ• MAY */
  else if (m === 5 && day >= 1 && day <= 3) applyTheme("AkshayaTritiya");
  else if (m === 5 && day >= 22 && day <= 24) applyTheme("BuddhaPurnima");

  /* ğŸŒ§ï¸ JULY */
  else if (m === 7 && day >= 7 && day <= 9) applyTheme("RathYatra");
  else if (m === 7 && day >= 20 && day <= 22) applyTheme("GuruPurnima");

  /* ğŸ„ AUGUST */
  else if (m === 8 && day >= 9 && day <= 11) applyTheme("RakshaBandhan");
  else if (m === 8 && day >= 18 && day <= 20) applyTheme("Janmashtami");

  /* ğŸ˜ SEPTEMBER */
  else if (m === 9 && day >= 7 && day <= 17) applyTheme("GaneshChaturthi");

  /* ğŸŒº OCTOBER */
  else if (m === 10 && day >= 3 && day <= 11) applyTheme("Navratri");
  else if (m === 10 && day === 12) applyTheme("Dussehra");

  /* ğŸª” NOVEMBER */
  else if (m === 11 && day >= 1 && day <= 5) applyTheme("Diwali");
  else if (m === 11 && day === 6) applyTheme("Govardhan");
  else if (m === 11 && day === 7) applyTheme("BhaiDooj");

  /* ğŸ“– DECEMBER */
  else if (m === 12 && day >= 7 && day <= 9) applyTheme("GitaJayanti");
  else if (m === 12 && day >= 24 && day <= 25) applyTheme("Christmas");

  /* DEFAULT */
  else applyTheme("Default");
}


function manualFestival(v){
  if (!v) {
    MANUAL_THEME = false;
    autoFestival();
  } else {
    MANUAL_THEME = true;
    applyTheme(v);
  }
}


const VEGS=["àªŸàª¾àª®à«‡àªŸàª¾","àª®àª°àªšàª¾àª‚","àª¬àªŸàª¾àª•àª¾","àª¡à«àª‚àª—àª³à«€","àª•àª¾àª•àª¡à«€","àª—àª¾àªœàª°","àª°à«€àª‚àª—àª£","àª¬àª¾àªœàª°à«€àª¯àª¾ àª°à«€àª‚àª—àª£","àªªàª¾àª²àª•","àª¦à«‚àª§à«€","àªªà«‡àª¤àª°àª—àª¾àª²àª¾"];

function emoji(v){
  return {
    "àªŸàª¾àª®à«‡àªŸàª¾":"ğŸ…","àª®àª°àªšàª¾àª‚":"ğŸŒ¶ï¸","àª¬àªŸàª¾àª•àª¾":"ğŸ¥”","àª¡à«àª‚àª—àª³à«€":"ğŸ§…",
    "àª•àª¾àª•àª¡à«€":"ğŸ¥’","àª—àª¾àªœàª°":"ğŸ¥•","àª°à«€àª‚àª—àª£":"ğŸ†",
    "àª¬àª¾àªœàª°à«€àª¯àª¾ àª°à«€àª‚àª—àª£":"ğŸ†","àªªàª¾àª²àª•":"ğŸ¥¬","àª¦à«‚àª§à«€":"ğŸ¥’","àªªà«‡àª¤àª°àª—àª¾àª²àª¾":"ğŸƒ"
  }[v]||"ğŸ¥¬";
}

const FARMER_PHONE={
  "JK Hirani":"919726764636",
  "Bhumi":"919925311805",
  "Kumud":"919925311805",
  "Dharmin":"919879766839",
  "Shreeji Farm":"91",
  "HMV":"91"
};

const BUYER_PHONE={
  "Mohan":"919687575039",
  "Mansoor":"919822222222",
  "Ramesh":"919833333333"
};

function setMode(m){
  MODE=m;
  mNormal.classList.toggle("active",m==="normal");
  mAdv.classList.toggle("active",m==="advanced");
  mBuyer.classList.toggle("active",m==="buyer");

  farmerSection.classList.toggle("hidden",m==="buyer");
  sellerSection.classList.toggle("hidden",m==="buyer");
  buyerSection.classList.toggle("hidden",m!=="buyer");

  clearAll();
}

function toggleFarmerOther(){
  farmerOther.style.display=farmerSelect.value==="OTHER"?"block":"none";
}

function toggleBuyerOther(){
  buyerOther.style.display=buyerSelect.value==="OTHER"?"block":"none";
}
function fillFarmerMobile(){
 farmerMobile.value=farmerSelect.value==="OTHER"?"91":(FARMER_PHONE[farmerSelect.value]||"91");
}
function fillBuyerMobile(){
 buyerMobile.value=buyerSelect.value==="OTHER"?"91":(BUYER_PHONE[buyerSelect.value]||"91");
}

function vegSelect(){
  return `<select class="veg" onchange="toggleVegOther(this)">
    <option value="">àª¶àª¾àª•</option>
    ${VEGS.map(v=>`<option>${v}</option>`).join("")}
    <option value="OTHER">àª…àª¨à«àª¯</option>
  </select>`;
}

function toggleVegOther(sel){
  sel.parentElement.querySelector(".other").style.display=
    sel.value==="OTHER"?"block":"none";
}

function addSellerItem(){
  const r=document.createElement("div");
  r.className="row "+(MODE==="advanced"?"advanced":"normal");
  r.innerHTML=`
    ${vegSelect()}
    <input class="other" placeholder="àª¶àª¾àª•àª¨à«àª‚ àª¨àª¾àª®">
    <input class="price" placeholder="àª­àª¾àªµ â‚¹">
    ${MODE==="normal"
      ? `<input class="price-to" placeholder="àª¥à«€">`
      : `<input class="qty" placeholder="àªµàªœàª¨">`}
  `;
  sellerItems.appendChild(r);
}

function addBuyerItem(){
  const r=document.createElement("div");
  r.className="row buyer";
  r.innerHTML=`
    ${vegSelect()}
    <input class="other" placeholder="àª†àª‡àªŸàª®">
    <input class="boxes" placeholder="àª¬à«‹àª•à«àª¸">
    <input class="qty" placeholder="àªµàªœàª¨">
    <input class="price" placeholder="àª­àª¾àªµ">
    <input class="comm" value="7">
    <input class="boxrate" value="4">
  `;
  buyerItems.appendChild(r);
}

function getDate(){
  return new Date().toLocaleDateString("en-GB",{timeZone:"Asia/Kolkata"});
}

function generate(){
  let msg="";
  if(MODE==="buyer"){
    let base=0,comm=0,box=0;
    const buyer=buyerSelect.value==="OTHER"?buyerOther.value:buyerSelect.value;
    msg=`àª¨àª®àª¸à«àª¤à«‡ ${buyer} ğŸ™\nàª¤àª¾àª°à«€àª–: ${getDate()}\n\n`;

    buyerItems.querySelectorAll(".row").forEach(r=>{
      const veg=r.querySelector(".veg").value==="OTHER"
        ? r.querySelector(".other").value
        : r.querySelector(".veg").value;
      const p=+r.querySelector(".price").value;
      const q=+r.querySelector(".qty").value;
      const b=+r.querySelector(".boxes").value;
      const c=+r.querySelector(".comm").value;
      const br=+r.querySelector(".boxrate").value;
      if(!veg||!p||!q)return;
      const sub=p*q;
      base+=sub; comm+=sub*(c/100); box+=b*br;
      msg+=`${emoji(veg)} ${veg} 
àª­àª¾àªµ â‚¹${p} Ã— ${q} = â‚¹${sub}\n`;
    });

    const other=+otherExpense.value||0;
    msg+=`\nàª®àª¾àª²: â‚¹${base}\nàª•àª®àª¿àª¶àª¨: â‚¹${comm}\nàª®àªœà«‚àª°à«€: â‚¹${box}\nàª…àª¨à«àª¯: â‚¹${other}\n\nàª•à«àª²: â‚¹${base+comm+box+other}\n\nâ€“ àª¨à«€àª²àª•àª‚àª  àª«à«àª°à«‚àªŸ àªàª¨à«àª¡ àªµà«‡àªœà«€àªŸà«‡àª¬àª²`;
  }else{
    const farmer=farmerSelect.value==="OTHER"?farmerOther.value:farmerSelect.value;
    msg=`àª¨àª®àª¸à«àª¤à«‡ ${farmer} ğŸ™\nàª¤àª¾àª°à«€àª–: ${getDate()}\n\nàª†àªœàª¨àª¾ àª­àª¾àªµ:\n`;
    sellerItems.querySelectorAll(".row").forEach(r=>{
      const veg=r.querySelector(".veg").value==="OTHER"
        ? r.querySelector(".other").value
        : r.querySelector(".veg").value;
      const p=r.querySelector(".price").value;
      if(!veg||!p)return;
      if(MODE==="normal"){
        const p2=r.querySelector(".price-to").value;
        msg+=`${emoji(veg)} ${veg} : â‚¹${p}${p2?` - â‚¹${p2}`:""}\n`;
      }else{
        const q=r.querySelector(".qty").value;
        msg+=`${emoji(veg)} ${veg} : â‚¹${p} Ã— ${q} = â‚¹${p*q}\n`;
      }
    });
    msg+=`\nâ€“ àª¨à«€àª²àª•àª‚àª  àª«à«àª°à«‚àªŸ àªàª¨à«àª¡ àªµà«‡àªœà«€àªŸà«‡àª¬àª²`;
  }
  message.value=msg;
}


function sendWhatsApp(){
  generate();

  let phone = "";

  if (MODE === "buyer") {
    phone = buyerMobile.value.trim();
  } else {
    phone = farmerMobile.value.trim();
  }

  // mobile not compulsory, but WhatsApp needs a number
  if (!phone || phone === "91") {
    alert("àª®à«‹àª¬àª¾àª‡àª² àª¨àª‚àª¬àª° àª¦àª¾àª–àª² àª•àª°à«‹");
    return;
  }

  window.open(
    `https://wa.me/${phone}?text=${encodeURIComponent(message.value)}`,
    "_blank"
  );
}


function copyText(){message.select();document.execCommand("copy")}
function clearAll(){
  farmerSelect.value="";
  farmerOther.value="";
  farmerOther.style.display="none";
  buyerSelect.value="";
  buyerOther.value="";
  buyerOther.style.display="none";
  sellerItems.innerHTML="";
  buyerItems.innerHTML="";
  otherExpense.value=0;
  message.value="";
  buyerMobile.value="";
  farmerMobile.value="";
  MODE!=="buyer" ? addSellerItem() : addBuyerItem();
}

window.addEventListener("DOMContentLoaded", autoFestival);

addSellerItem();
async function pickContact(){
  if (!("contacts" in navigator) || !("ContactsManager" in window)) {
    alert("Contact picker not supported on this device");
    return;
  }

  try{
    const contacts = await navigator.contacts.select(
      ["name","tel"],
      { multiple:false }
    );

    if(contacts.length){
      const c = contacts[0];
      if(c.tel && c.tel.length){
        buyerMobile.value = c.tel[0].replace(/\s+/g,"");
      }
      if(c.name && c.name.length){
        buyerOther.value = c.name[0];
        buyerSelect.value = "OTHER";
        toggleBuyerOther();
      }
    }
  }catch(err){
    console.log("Contact pick cancelled");
  }
}



</script>

</body>
</html>


